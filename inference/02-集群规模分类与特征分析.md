# 二、大模型推理优化：集群规模分类与特征分析

大模型推理系统的构建并非“一刀切”的工程，而是需要根据业务规模、算力需求及成本预算进行精准匹配的系统性工程。本章将依据节点数量与 GPU 卡数，将推理集群划分为小型、中型与大型三类，深入剖析各类集群的特征属性、核心挑战及针对性的优化策略，为技术选型提供科学依据。

## 目录

- [2.1 集群规模分类标准](#21-集群规模分类标准)
- [2.2 小型集群（1-64 卡）](#22-小型集群1-64-卡)
  - [2.2.1 基本特征](#221-基本特征)
  - [2.2.2 核心挑战与瓶颈](#222-核心挑战与瓶颈)
  - [2.2.3 关键优化策略](#223-关键优化策略)
- [2.3 中型集群（64-400 卡）](#23-中型集群64-400-卡)
  - [2.3.1 基本特征](#231-基本特征)
  - [2.3.2 核心挑战与瓶颈](#232-核心挑战与瓶颈)
  - [2.3.3 关键优化策略](#233-关键优化策略)
- [2.4 大型集群（400 卡以上）](#24-大型集群400-卡以上)
  - [2.4.1 基本特征](#241-基本特征)
  - [2.4.2 核心挑战与瓶颈](#242-核心挑战与瓶颈)
  - [2.4.3 关键优化策略](#243-关键优化策略)
- [2.5 集群规模对比总结](#25-集群规模对比总结)
  - [2.5.1 多维度特征对比矩阵](#251-多维度特征对比矩阵)
  - [2.5.2 演进路径与决策建议](#252-演进路径与决策建议)

---

## 2.1 集群规模分类标准

为了建立统一的技术对话语境，本白皮书基于 GPU 节点数量与总加速卡规模，制定了如下分类标准。该标准综合考虑了硬件拓扑、通信复杂度及典型应用场景：

| **集群类型** | **GPU 节点数量** | **总 GPU 卡数** | **典型部署架构**                | **核心应用场**景                       |
| ------------ | ---------------- | --------------- | ------------------------------- | -------------------------------------- |
| **小型集群** | 1-8 个节点       | 1-64 卡         | 单机多卡、PCIe 互联             | 算法验证、MVP 开发、边缘推理服务       |
| **中型集群** | 8-50 个节点      | 64-400 卡       | 多机多卡、RoCE/IB 组网          | 企业级生产环境、垂直领域模型服务       |
| **大型集群** | 50+ 个节点       | 400 卡以上      | 胖树/Dragonfly 拓扑、云原生架构 | 公有云 MaaS 平台、超大规模通用模型推理 |

---

## 2.2 小型集群（1-64 卡）

小型集群通常是企业切入大模型领域的起点，其特点是架构简单、部署灵活，但受限于单机资源瓶颈。

### 2.2.1 基本特征

- **硬件资源配置**：通常由 1-8 个 GPU 节点组成，单节点配置 1-8 张加速卡（如 NVIDIA A100/H100 或 RTX 4090）。
- **典型应用场景**：初创公司的算法验证、企业内部的研发测试环境、以及对延迟要求不高的边缘推理服务。
- **预算投入范围**：约 15 万 - 150 万人民币（基于 2024 年 12 月硬件市场价格估算）。
- **服务用户规模**：通常服务于日活跃用户 (DAU) 小于 10 万的业务体系。
- **网络互联要求**：对节点间通信带宽要求较低，通常千兆或万兆以太网即可满足需求，无需昂贵的 InfiniBand 网络。

### 2.2.2 核心挑战与瓶颈

在显存容量方面，单卡物理显存的上限直接限制了千亿参数级模型的加载与运行：

- **模型参数与显存的错配**：主流加速卡显存容量在 24-80GB 之间，而 70B 参数模型仅 FP16 权重加载即需约 **140GB** 显存。
- **量化后的存储压力**：Llama-3.1 70B 经 INT4 量化后显存占用降至约 35GB，勉强可在单张 H100 上运行，但 **KV Cache** 空间受限。
- **超大模型的部署难题**：DeepSeek-V3 671B (MoE) 即使仅激活 37B 参数，INT4 量化后仍需约 **150GB** 显存，单卡部署不可行。
- **长序列处理受限**：Batch Size 严重受限，导致在处理长序列（如 128K Context）时吞吐量急剧下降。

在计算资源利用率方面，低并发场景下的算力闲置与冷启动开销显著降低了系统效能：

- **算力闲置**：在低并发场景下，GPU 大部分时间处于闲置或低负载状态，造成算力浪费。
- **冷启动延迟**：模型切换与冷启动开销显著，影响多模型混合部署的响应速度。
- **调度僵化**：缺乏有效的动态调度机制，难以应对突发流量冲击。

在成本控制方面，有限的硬件预算要求技术团队必须在性能与成本之间寻找极致的平衡点：

- **预算天花板**：硬件投入预算封顶，无法通过简单的“堆硬件”解决性能问题。
- **运维成本敏感**：对运维成本极其敏感，倾向于使用开源、轻量级的解决方案。
- **ROI 权衡**：需要在模型精度、推理速度与硬件成本之间寻找最佳平衡点。

### 2.2.3 关键优化策略

**核心原则**：通过极致的模型压缩与显存管理，最大化单卡推理效率，降低对高端硬件的依赖。

**技术实施路径**：

1. **推测解码 (Speculative Decoding)**：

   - 利用小模型（如 7B）作为 Drafter 快速生成候选 Token，大模型（如 70B）进行并行验证。
   - 在保证输出一致性的前提下，可实现 2-3 倍的端到端推理加速。
   - **典型技术栈**：vLLM, TensorRT-LLM。

2. **动态批处理 (Continuous Batching)**：

   - 打破传统静态 Batch 的限制，允许在推理过程中动态插入新请求并移除已完成请求。
   - 结合**序列长度分桶 (Sequence Bucketing)**，将长度相近的请求组合，大幅减少 Padding 带来的计算浪费。

3. **显存精细化管理**：
   - **PagedAttention**：引入操作系统分页内存管理的思想，将 KV Cache 切分为固定大小的块（Block），解决显存碎片化问题。
   - **FlashAttention-2**：通过分块计算与重计算策略，将注意力机制的显存复杂度从 $O(n^2)$ 降低至线性水平。

**模型规模与硬件配置推荐表**：

| **模型规模**    | **量化精度** | **最大 Batch Size** | **KV Cache** | **上下文长度** | **显存占用** | **推理吞吐** | **推荐 GPU** |
| :-------------- | :----------- | :------------------ | :----------- | :------------- | :----------- | :----------- | :----------- |
| **7B**          | FP16         | 64                  | 12GB         | 4096           | 14GB         | 150 tokens/s | RTX 4090     |
| **7B**          | INT8         | 128                 | 8GB          | 4096           | 8GB          | 200 tokens/s | RTX 4090     |
| **13B**         | INT4         | 32                  | 6GB          | 2048           | 12GB         | 120 tokens/s | RTX 4090     |
| **70B**         | INT4         | 8                   | 4GB          | 1024           | 35GB         | 80 tokens/s  | H100 80GB    |
| **70B**         | INT8         | 4                   | 8GB          | 2048           | 70GB         | 60 tokens/s  | 2×H100       |
| **405B**        | INT4         | 2                   | 16GB         | 2048           | 200GB        | 25 tokens/s  | 4×H100       |
| **DeepSeek-V3** | INT4         | 4                   | 20GB         | 4096           | 150GB        | 45 tokens/s  | 2×H100       |

**量化技术选型指南**：

| **量化类型** | **精度损失** | **显存节省** | **加速收益** | **适用场景**                     | **推荐框架** |
| :----------- | :----------- | :----------- | :----------- | :------------------------------- | :----------- |
| **FP16**     | 基准         | 0%           | 1x           | 显存充裕，追求极致精度           | PyTorch      |
| **INT8**     | < 1%         | 50%          | 1.8x         | 生产环境标准配置，平衡性能与精度 | TensorRT-LLM |
| **INT4**     | 2-4%         | 75%          | 2.5x         | 显存极度受限，边缘设备推理       | GPTQ / AWQ   |
| **NF4**      | 1-3%         | 75%          | 2.2x         | QLoRA 微调后的快速部署           | BitsAndBytes |

**性能调优检查清单 (Checklist)**：

- [ ] **显存利用率**：是否稳定在 85% 以上？（避免显存闲置）。
- [ ] **KV Cache 命中率**：是否开启 PagedAttention 并达到 > 80% 的块利用率？
- [ ] **量化精度验证**：INT4 量化后的 PPL (Perplexity) 损失是否控制在 2% 以内？
- [ ] **首字延迟 (TTFT)**：7B 模型是否控制在 100ms 以内？
- [ ] **吞吐量达标**：单卡吞吐量是否超过 100 tokens/s？
- [ ] **碎片整理**：显存碎片率是否控制在 10% 以下？

---

## 2.3 中型集群（64-400 卡）

中型集群通常作为企业级生产环境的主力，需在性能、扩展性与成本之间寻找最优解。

### 2.3.1 基本特征

- **硬件资源配置**：部署规模为 8-50 个节点，总计 64-400 张加速卡，通常采用标准机架式服务器集群。
- **典型应用场景**：垂直领域大模型服务（如医疗、金融）、中型 SaaS 平台后端、企业级私有化部署。
- **预算投入范围**：150 万 - 1500 万人民币。
- **服务用户规模**：日活跃用户在 10 万至 100 万量级。
- **网络互联要求**：节点间通信成为关键瓶颈，需配备 100Gbps InfiniBand 或 400Gbps RoCE v2 高速网络。
- **存储系统需求**：配备高性能 NVMe SSD 阵列，支持模型热加载与 Checkpoint 快速读写。

### 2.3.2 核心挑战与瓶颈

在网络通信方面，节点间的跨机互联带宽与延迟成为制约系统线性扩展能力的核心短板：

- **有效带宽折损**：100Gbps 网络的理论带宽在实际应用中有效吞吐量往往仅约 **80Gbps**，成为数据并行的短板。
- **通信延迟放大**：节点间往返延迟 (RTT) 通常在 **1-5μs**，严重影响张量并行 (TP) 的同步效率。
- **拓扑拥塞风险**：网络拓扑设计不当会导致拥塞，推荐采用无阻塞的 **Fat-Tree** 或 **Dragonfly** 拓扑结构。

在资源调度方面，多任务并发引发的资源碎片化与负载不均衡问题显著增加了系统管理的复杂度：

- **资源碎片化**：需同时处理不同规模模型的并发请求，静态分区易导致资源碎片化。
- **负载不均衡**：缺乏高效的负载均衡策略，导致部分节点过载而部分节点空闲。
- **集群级显存管理**：显存碎片化问题从单机扩展至集群维度，内存管理难度指数级上升。

在系统稳定性方面，随着节点规模的扩大，单点故障的影响范围被放大，对容错机制提出了更高要求：

- **硬件故障常态化**：随着节点数量增加，硬件故障（如 ECC 错误、网络丢包）成为常态。
- **级联失效风险**：单个节点的故障可能导致整个并行推理任务失败，缺乏高效的容错与自动恢复机制。
- **可观测性黑洞**：监控维度爆炸，传统运维手段难以实时定位性能抖动根源。

### 2.3.3 关键优化策略

**核心原则**：以通信与计算的重叠 (Overlap) 为核心，通过混合并行策略与智能调度，突破线性扩展瓶颈。

**技术实施路径**：

1. **混合并行策略 (Hybrid Parallelism)**：

   - **张量并行 (TP)**：在节点内 (Intra-node) 利用 NVLink 高带宽优势进行权重切分。
   - **流水线并行 (PP)**：在节点间 (Inter-node) 将模型层切分，降低显存占用，但需优化“气泡”时间。
   - **数据并行 (DP)**：在多个副本间分发请求，实现吞吐量的线性扩展。

2. **通信掩盖技术 (Communication Overlap)**：

   - 利用计算密集型算子（如 GEMM）执行期间，异步进行梯度或激活值的网络传输。
   - 通过全异步架构，可减少约 30% 的通信等待时间。

3. **智能请求调度**：
   - **请求路由**：基于节点实时负载（显存、计算利用率）的智能分发算法。
   - **队列管理**：实现优先级队列，确保高 SLA 业务的响应速度。

**模型规模与并行策略推荐表**：

| 模型规模    | 推荐策略   | TP (节点内) | PP (节点间) | DP (副本数) | 预计通信开销 |
| :---------- | :--------- | :---------- | :---------- | :---------- | :----------- |
| **7B-13B**  | TP 优先    | 8           | 1           | 8           | ~15%         |
| **30B-70B** | TP+PP 混合 | 8           | 4           | 2           | ~25%         |
| **175B+**   | PP 优先    | 4           | 16          | 1           | ~20%         |

**中型集群部署参考架构**：

```text
负载均衡层: Nginx / HAProxy + Kubernetes Ingress
    ↓
AI API 网关 (API Gateway) - 负责鉴权、流控与路由
    ↓
分布式计算节点 (Kubernetes Pods):
- Node Group A: 8×H100, TP=8, vLLM Pod (处理 70B 模型)
- Node Group B: 8×H100, TP=8, vLLM Pod (处理 70B 模型)
- Node Group C: 8×H100, TP=4, PP=2 (处理 175B 模型)
    ↓
高速互联网络: 400Gbps InfiniBand (RDMA + GPUDirect)
```

**性能优化检查清单 (Checklist)**：

- [ ] **张量并行效率**：TP 带来的加速比是否达到线性值的 90% 以上？
- [ ] **流水线气泡**：PP 产生的空闲时间占比是否控制在 10% 以内？
- [ ] **通信占比**：通信开销占总推理时间的比例是否小于 20%？
- [ ] **负载均衡**：各节点间的负载偏差率是否小于 5%？
- [ ] **故障恢复**：单节点故障后的服务自动恢复时间是否小于 30s？
- [ ] **网络利用率**：InfiniBand 带宽利用率是否处于合理区间 (< 80% 以避免拥塞)？

---

## 2.4 大型集群（400 卡以上）

大型集群代表了当前 AI 基础设施的顶层形态，通常部署于公有云 MaaS 平台或超大型科技企业的核心计算中心。此类集群不仅需要支撑万亿参数级别的超大模型训练与推理，还需同时服务数以百万计的并发用户，其设计重点已从单纯的“算力堆叠”转向了对“系统可靠性”与“极致能效比”的追求。

### 2.4.1 基本特征

- **硬件资源配置**：规模通常超过 50 个 GPU 节点，集成 400 至数千张 H100/H800 等顶级加速卡。
- **网络互联架构**：采用基于 400Gbps/800Gbps InfiniBand 或 RoCE v2 的多层胖树 (Fat-Tree) 或 Dragonfly 拓扑，实现全网无阻塞通信。
- **典型应用场景**：ChatGPT 类国民级应用、公有云基础大模型服务 (MaaS)、跨国企业的全球化 AI 推理平台。
- **预算投入范围**：通常在 2000 万人民币以上，且不仅限于硬件采购，还包含昂贵的数据中心电力与冷却成本。
- **存储系统要求**：必须配备 PB 级的高性能分布式存储（如 Lustre, GPUDirect Storage），以满足 Checkpoint 的分钟级写入需求。

### 2.4.2 核心挑战与瓶颈

在系统稳定性方面，随着集群规模的指数级增长，硬件故障的常态化对服务的高可用性构成了严峻挑战：

- **系统熵增定律**：硬件组件的平均故障间隔时间 (MTBF) 显著缩短，在千卡级别的集群中，GPU 掉卡、ECC 错误、光模块失效等硬件故障几乎每天都会发生。
- **软件定义的可靠性**：如何在一个“注定会出错”的物理基础设施上构建“永远在线”的软件服务，是大型集群面临的首要挑战。

在通信延迟方面，跨机架乃至跨数据中心的物理距离导致光速延迟不可忽视，严重制约了分布式推理的响应速度：

- **物理距离的诅咒**：当模型通过流水线并行 (PP) 跨越多个物理机柜时，长距离传输引入的微秒级延迟会被层层放大，严重制约了端到端的推理响应速度。
- **集合通信风暴**：大规模集合通信（如 All-Reduce）极易引发网络拥塞与长尾延迟，单一链路的抖动可能拖累整个集群。

在能效与成本方面，大规模集群的电力消耗与运营成本呈非线性增长，对 TCO 控制提出了极致要求：

- **能耗黑洞**：单张 H100 功耗高达 700W，千卡集群仅 GPU 功耗即达 **700kW**，算上冷却与外围设备，**PUE** (Power Usage Effectiveness) 控制成为关键。
- **商业模式的可行性**：如何在保证 SLA 的前提下，通过精细化的资源调度与削峰填谷策略降低运营成本，是决定商业模式成立与否的关键。

### 2.4.3 关键优化策略

**核心原则**：以“云原生”为基石，构建具备自动愈合能力的分布式推理架构，通过软硬协同实现极致的吞吐与能效。

**技术实施路径**：

1. **多级容错与弹性调度**：

   - **Pod 级故障隔离**：利用 Kubernetes Operator 实时监控 GPU 健康状态，一旦发现异常（如 Xid Error），自动将节点标记为不可用并触发 Pod 漂移。
   - **无状态推理服务**：将推理实例设计为无状态 (Stateless)，配合存算分离架构，实现亚秒级的服务迁移与扩缩容。

2. **拓扑感知调度 (Topology-Aware Scheduling)**：

   - 在 Kubernetes 调度器中引入网络拓扑感知能力，尽量将同一推理任务的 GPU 容器调度到同一交换机或同一机架下，最小化跨交换机流量。
   - 对于流水线并行 (PP)，严格按照物理链路的邻接关系分配 Stage，避免“绕路”通信。

3. **异构算力混部与潮汐调度**：
   - **离在线混部**：在夜间低峰期，将部分推理算力释放给离线训练或数据处理任务（如各种预处理作业），提升硬件利用率。
   - **分层存储加速**：利用节点本地 NVMe SSD 组建分布式缓存层，加速模型热加载，减少对中心化存储的冲击。

**大型集群分层部署架构**：

```text
                    ┌─────────────────────────────────────┐
                    │      全球负载均衡器 (GSLB)            │
                    │    (基于地理位置与健康度的路由)         │
                    └─────────────────┬───────────────────┘
                                      │
        ┌─────────────────────────────┼─────────────────────────────┐
        ▼                             ▼                             ▼
┌───────────────┐             ┌───────────────┐             ┌───────────────┐
│  区域 A 集群   │             │  区域 B 集群    │             │  区域 C 集群   │
│ (800 GPUs)    │             │ (400 GPUs)    │             │ (200 GPUs)    │
└───────┬───────┘             └───────┬───────┘             └───────┬───────┘
        │                             │                             │
┌───────▼─────────────────────────────┴─────────────────────────────▼───────┐
│                        AI API 网关集群 (K8s Ingress)                       │
│  [鉴权] [流控] [熔断] [灰度发布] [请求聚合] [Cache Aside]                      │
└─────────────────────────────────────┬─────────────────────────────────────┘
                                      │
┌─────────────────────────────────────▼─────────────────────────────────────┐
│                      分布式计算层 (K8s Node Pools)                          │
│                                                                           │
│ ┌───────────────┐  ┌───────────────┐  ┌───────────────┐  ┌──────────────┐ │
│ │  推理资源池     │  │  预处理资源池   │  │  训练/微调池   │  │  弹性实例池    │ │
│ │ (高优先级)      │  │ (中优先级)     │  │ (低优先级)     │  │ (Spot实例)    │ │
│ │ 8xH100/节点    │  │ 4xA10/节点    │  │ 8xH800/节点    │  │ 4xT4/节点     │ │
│ └───────────────┘  └───────────────┘  └───────────────┘  └──────────────┘ │
└─────────────────────────────────────┬─────────────────────────────────────┘
                                      │
┌─────────────────────────────────────▼─────────────────────────────────────┐
│                  高性能互联底座 (RDMA + GPUDirect)                          │
│           Fat-Tree / Dragonfly 拓扑 + 800Gbps InfiniBand                   │
└───────────────────────────────────────────────────────────────────────────┘
```

**稳定性与性能保障检查清单 (Checklist)**：

- [ ] **全链路冗余**：核心组件（网关、ETCD、存储控制器）是否具备至少 N+1 冗余？
- [ ] **故障自愈时间**：单节点故障引发的 Pod 重新调度与服务恢复时间是否小于 60 秒？
- [ ] **网络拥塞控制**：是否开启了 ECN (Explicit Congestion Notification) 或 PFC (Priority-based Flow Control) 防止丢包？
- [ ] **资源利用率**：日均 GPU 利用率是否超过 60%？（低于此值说明混部策略有待优化）
- [ ] **慢节点剔除**：是否具备自动识别并隔离“慢节点 (Straggler)”的机制？
- [ ] **容量水位预警**：是否建立了基于趋势预测的容量预警机制（至少提前 3 天预警）？

---

## 2.5 集群规模对比总结

在完成了对小型、中型及大型集群的深度剖析后，本节通过多维度的横向对比，帮助技术决策者厘清不同规模集群的本质差异。选择合适的集群规模并非单纯的技术堆叠，而是业务发展阶段、成本预算与技术能力三者之间的动态平衡。

### 2.5.1 多维度特征对比矩阵

下表汇总了三类集群在硬件、性能、技术栈及成本等关键维度的核心差异，为架构选型提供直观参考。

| **维度**     | **特征指标**   | **小型集群** (1-64 卡) | **中型集群** (64-400 卡)  | **大型集群** (400 卡+)  |
| :----------- | :------------- | :--------------------- | :------------------------ | :---------------------- |
| **基础架构** | **典型拓扑**   | 单机 PCIe 直连         | RoCE v2 / IB 组网         | Fat-Tree / Dragonfly    |
| **基础架构** | **网络带宽**   | 10-25 Gbps             | 100-200 Gbps              | 400-800 Gbps            |
| **基础架构** | **存储系统**   | 本地 NVMe SSD          | 共享文件系统 (NFS/Ceph)   | 高性能并行存储 (Lustre) |
| **性能表现** | **主要瓶颈**   | 显存容量 (OOM)         | 通信延迟 (Latency)        | 系统稳定性 (Entropy)    |
| **性能表现** | **优化重点**   | 量化、PagedAttention   | 混合并行 (TP+PP)、Overlap | 拓扑感知、异构混部      |
| **性能表现** | **可用性目标** | 99.5% (允许短时中断)   | 99.9% (生产级高可用)      | 99.99% (金融级可靠性)   |
| **技术体系** | **核心技术栈** | Docker + PyTorch       | K8s + Ray/Volcano         | 云原生全栈 + AIOps      |
| **技术体系** | **运维复杂度** | 低 (单点管理)          | 中 (集群监控)             | 极高 (自动化运维)       |
| **技术体系** | **团队配置**   | 1-2 人 (全栈工程师)    | 5-10 人 (SRE + 算法)      | 20+ 人 (跨部门协作)     |
| **成本效益** | **建设周期**   | 1-2 周                 | 1-3 个月                  | 6 个月以上              |
| **成本效益** | **资金门槛**   | < 200 万               | 200 万 - 2000 万          | > 2000 万               |
| **成本效益** | **适用阶段**   | 0 → 1 (验证期)         | 1 → 10 (成长期)           | 10 → ∞ (成熟期)         |

### 2.5.2 演进路径与决策建议

企业在构建 AI 基础设施时，通常遵循“小步快跑、平滑演进”的原则。过早引入大型集群架构会带来不必要的维护负担，而在此后业务爆发期固守小型集群架构则会成为增长的绊脚石。

**集群演进路线图**：

```text
┌───────────────┐       业务量突破       ┌───────────────┐       业务全球化       ┌───────────────┐
│  Phase 1:     │      QPS > 1000      │  Phase 2:     │      多区域覆盖        │  Phase 3:     │
│  MVP 验证期    │ ───────────────────► │  规模化增长期   │ ───────────────────► │  平台化成熟期   │
│ (小型集群)     │      SLA > 99.9%     │ (中型集群)     │      异构算力融合       │ (大型集群)     │
└───────┬───────┘                      └───────┬───────┘                      └───────┬───────┘
        │                                      │                                      │
        ▼                                      ▼                                      ▼
    单机多卡部署                           Kubernetes 集群                        多云/混合云架构
    (Docker Compose)                      (RDMA 网络优化)                        (统一资源调度)
        │                                      │                                      │
        ▼                                      ▼                                      ▼
    重点：跑通模型                         重点：吞吐量提升                        重点：稳定性与成本
    (量化、微调)                           (Batching、并行)                       (容错、混部)
```

**选型决策关键点**：

1. **看业务属性**：如果是内部使用的辅助工具或离线分析任务，**小型集群**配合排队机制通常是性价比最高的选择。
2. **看 SLA 要求**：一旦业务直接面向 C 端用户且对延迟敏感（如即时对话、搜索），必须升级至**中型集群**以利用多机并行能力降低首字延迟 (TTFT)。
3. **看边际成本**：当推理成本在总营收中占比超过 20% 时，应考虑向**大型集群**架构转型，通过混部和竞价实例等手段压降单位 Token 成本。

---
